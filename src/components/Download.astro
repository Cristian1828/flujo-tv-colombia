---
import { waLink } from '../config/site';

const optionIcons: Record<string, string> = {
  phone: `<svg class="w-14 h-14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="7" y="2" width="10" height="20" rx="2"/><path d="M11 19h2"/></svg>`,
  tvbox: `<svg class="w-14 h-14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="4" y="9" width="16" height="10" rx="2"/><path d="M8 9V7"/><path d="M16 9V7"/><path d="M9 19h6"/></svg>`,
  fire: `<svg class="w-14 h-14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 22a7 7 0 0 0 7-7c0-3-2-5-3-6 0 2-1 3-2 4-1-2-1-4-4-7C7 8 5 11 5 15a7 7 0 0 0 7 7z"/></svg>`,
  stick: `<svg class="w-14 h-14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="3" y="10" width="14" height="6" rx="3"/><path d="M17 13h4"/><path d="M19 11v4"/></svg>`,
};

const options = [
  {
    platform: 'Android (móvil/tablet)',
    desc: 'Te enviamos el enlace de descarga según tu dispositivo.',
    icon: 'phone',
  },
  {
    platform: 'TV Box / Google TV',
    desc: 'Ideal para ver en tu TV. Requiere dispositivo compatible.',
    icon: 'tvbox',
  },
  {
    platform: 'Fire Stick',
    desc: 'Compatible con dispositivos Fire Stick.',
    icon: 'fire',
  },
  {
    platform: 'Xiaomi Stick',
    desc: 'Compatible con Xiaomi Stick.',
    icon: 'stick',
  },
];

const linkFor = (platform: string) =>
  waLink(`Hola, quiero el enlace de descarga de Flujo TV Colombia para: ${platform}.`);
---

<section id="descarga" class="relative py-32 bg-gradient-to-b from-black via-gray-950 to-black overflow-hidden">
  <div class="absolute inset-0 opacity-10">
    <div class="absolute top-10 right-10 w-72 h-72 bg-blue-500 rounded-full blur-3xl"></div>
    <div class="absolute bottom-10 left-10 w-72 h-72 bg-yellow-500 rounded-full blur-3xl"></div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-6">
    <div class="mb-24 text-center">
      <div class="inline-block mb-6 px-8 py-3 bg-gradient-to-r from-yellow-500/10 via-blue-500/10 to-red-500/10 border-y-2 border-yellow-500/30">
        <span class="text-yellow-400 font-black text-sm tracking-widest uppercase">Descargas</span>
      </div>

      <h2 class="text-6xl md:text-8xl font-black text-white mb-6">
        TE PASAMOS
        <span class="block text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 via-blue-500 to-red-500">EL ENLACE</span>
      </h2>

      <p class="text-2xl text-white/70 max-w-3xl mx-auto">
        En lugar de inventar botones, te enviamos el enlace correcto por WhatsApp según tu dispositivo.
      </p>
    </div>

    <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
      {options.map((o, index) => (
        <div class="group relative" style={`animation-delay:${index * 0.1}s;`}>
          <div class="relative bg-gray-900/50 backdrop-blur border-2 border-gray-800 group-hover:border-blue-500 p-8 transition-all duration-500 group-hover:scale-105">
            <div class="text-white/90 mb-4 group-hover:scale-110 transition-transform duration-300">
              <span class="inline-flex" set:html={optionIcons[o.icon]} />
            </div>
            <h3 class="text-xl font-black text-white mb-2">{o.platform}</h3>
            <p class="text-sm text-white/60 mb-6">{o.desc}</p>

            <a
              href={linkFor(o.platform)}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex w-full items-center justify-center gap-2 px-4 py-3 bg-yellow-500 text-black font-black hover:bg-yellow-400 transition-all duration-300"
            >
              Pedir enlace
              <span aria-hidden="true">→</span>
            </a>
          </div>
        </div>
      ))}
    </div>

    <div class="mt-10 text-center text-xs text-white/60">
      Smart TV sin Android requiere TV Box. Requiere internet estable.
    </div>
  </div>
</section>

<style>
  [style*="animation-delay"] {
    animation: fadeInUp 0.7s ease-out backwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
  }
</style>
