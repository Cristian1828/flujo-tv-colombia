---
import { site, waLink } from '../config/site';

const plans = site.pricing.plans.map((p) => ({
  ...p,
  href: waLink(`Hola, quiero el plan ${p.name} (${site.pricing.currencyCode} ${p.price}) para Flujo TV Colombia.`),
}));
---

<section id="planes" class="relative py-24 bg-gradient-to-b from-[#06080c] via-black to-[#06080c]">
  <div class="mx-auto max-w-6xl px-4">
    <div class="text-center">
      <p class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2 text-sm text-white/80">
        Precios en {site.pricing.currencyCode}
      </p>
      <h2 class="mt-5 text-4xl font-extrabold tracking-tight md:text-5xl">Planes para usarlo donde estés</h2>
      <p class="mt-4 text-white/70">
        Acceso premium con soporte garantizado. Elige el tiempo que más te convenga.
      </p>
    </div>

    <div class="mt-12 grid gap-6 lg:grid-cols-4">
      {plans.map((p) => (
        <div class={`rounded-3xl border ${p.highlight ? 'border-white/20 bg-white/10' : 'border-white/10 bg-white/5'} p-6 backdrop-blur`}>
          <div class="flex items-start justify-between gap-4">
            <div>
              <h3 class="text-xl font-bold">{p.name}</h3>
              <p class="mt-1 text-sm text-white/70">{p.label}</p>
            </div>
            {p.highlight && (
              <span class="rounded-full bg-red-600/15 text-red-200 border border-red-500/30 px-3 py-1 text-xs font-semibold">Recomendado</span>
            )}
          </div>

          <div class="mt-6 flex items-end gap-2">
            <span class="text-4xl font-extrabold">${p.price}</span>
            <span class="pb-1 text-sm text-white/60">{site.pricing.currencyCode}</span>
          </div>

          <ul class="mt-6 space-y-3 text-sm text-white/80">
            {p.features.map((f) => (
              <li class="flex gap-3">
                <span class="mt-1.5 h-2 w-2 rounded-full bg-emerald-300/90"></span>
                <span>{f}</span>
              </li>
            ))}
          </ul>

          <a
            href={p.href}
            target="_blank"
            rel="noopener noreferrer"
            class={`mt-7 inline-flex w-full items-center justify-center rounded-2xl px-5 py-3 text-sm font-semibold transition ${
              p.highlight
                ? 'bg-red-600 text-white hover:bg-red-700'
                : 'border border-white/15 bg-white/5 text-white/90 hover:bg-red-600 hover:border-red-500/40 hover:text-white'
            }`}
          >
            Activar por WhatsApp
          </a>
        </div>
      ))}
    </div>

    <div class="mt-10 text-center text-xs text-white/60">
      Requiere internet estable. Smart TV sin Android requiere TV Box.
    </div>
  </div>
</section>
